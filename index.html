<?php
// Nyxion Labs — Single-file PHP site (index.php)
// Drop this at your web root. Put your logo as ./logo.jpg
// This build is hardened for shared hosts (older PHP, write perms, mail quirks).

/* ================= Settings ================= */
$brand_name   = 'Nyxion Labs';
$contact_to   = 'info@nyxionlabs.com';    // <-- change to your inbox
$contact_from = 'no-reply@nyxionlabs.com'; // domain you can send from (ideally same domain as the site)

/* ================= Safe bootstrap & logging ================= */
@ini_set('log_errors', '1');
@ini_set('display_errors', '0'); // do NOT show errors to visitors
@ini_set('error_log', __DIR__ . '/php_errors.log');
error_reporting(E_ALL);

if (function_exists('mb_internal_encoding')) { @mb_internal_encoding('UTF-8'); }

/* Start session safely (some hosts misconfigure session.save_path) */
if (session_status() === PHP_SESSION_NONE) {
  @session_start();
}

/* CSRF helpers (backwards compatible) */
if (!function_exists('nyx_randbytes')) {
  function nyx_randbytes($len = 16) {
    if (function_exists('random_bytes')) { return random_bytes($len); }
    if (function_exists('openssl_random_pseudo_bytes')) {
      $strong = false; $b = openssl_random_pseudo_bytes($len, $strong);
      if ($b !== false) { return $b; }
    }
    // Fallback (not cryptographic, but fine for CSRF token on small site)
    $out = '';
    for ($i=0; $i<$len; $i++) { $out .= chr(mt_rand(0, 255)); }
    return $out;
  }
}
if (!function_exists('nyx_timing_safe_equals')) {
  function nyx_timing_safe_equals($a, $b) {
    if (function_exists('hash_equals')) return hash_equals($a, $b);
    if (strlen($a) !== strlen($b)) return false;
    $res = 0;
    for ($i=0; $i<strlen($a); $i++) { $res |= ord($a[$i]) ^ ord($b[$i]); }
    return $res === 0;
  }
}

/* Generate CSRF token if missing */
if (empty($_SESSION['csrf'])) {
  $_SESSION['csrf'] = bin2hex(nyx_randbytes(16));
}

/* Helpers */
function h($v){ return htmlspecialchars($v ?? '', ENT_QUOTES, 'UTF-8'); }
function safe_ip() {
  foreach (array('HTTP_CF_CONNECTING_IP','HTTP_X_FORWARDED_FOR','REMOTE_ADDR') as $k) {
    if (!empty($_SERVER[$k])) return substr((string)$_SERVER[$k],0,45);
  }
  return 'unknown';
}

/* ================= Assets (logo autodetect) ================= */
$logo_src = null;
$logo_path = __DIR__ . '/logo.png';
if (file_exists($logo_path)) {
  $mime = (function_exists('mime_content_type') ? @mime_content_type($logo_path) : 'image/png');
  if (!$mime) $mime = 'image/jpeg';
  $data = @file_get_contents($logo_path);
  if ($data !== false) {
    $logo_src = "data:$mime;base64," . base64_encode($data); // inline for <img>, favicon, OG
  }
}
if (!$logo_src) {
  // Fallback SVG if logo.jpg missing/unreadable
  $svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" role="img" aria-label="Nyxion Labs"><defs><linearGradient id="g" x1="0" x2="1" y1="0" y2="1"><stop stop-color="#6ee7ff"/><stop offset="1" stop-color="#8b5cf6"/></linearGradient></defs><rect rx="12" width="64" height="64" fill="url(#g)"/></svg>';
  $logo_src = 'data:image/svg+xml;base64,' . base64_encode($svg);
}

/* ================= Contact Form (PRG pattern) ================= */
$errors = array(); $name=''; $email=''; $msg='';
if ($_SERVER['REQUEST_METHOD'] === 'POST' && (isset($_POST['formid']) && $_POST['formid'] === 'contact')) {
  // Basic anti-bot checks
  $csrf_ok = isset($_POST['csrf']) && nyx_timing_safe_equals($_SESSION['csrf'], $_POST['csrf']);
  if (!$csrf_ok) { $errors[] = 'Session expired. Please try again.'; }
  $hp = trim(isset($_POST['hp']) ? $_POST['hp'] : ''); // honeypot
  if ($hp !== '') { $errors[] = 'Spam detected.'; }

  // Fields
  $name  = trim(isset($_POST['name']) ? $_POST['name'] : '');
  $email = trim(isset($_POST['email']) ? $_POST['email'] : '');
  $msg   = trim(isset($_POST['message']) ? $_POST['message'] : '');

  if ($name === '') { $errors[] = 'Please enter your name.'; }
  if (!filter_var($email, FILTER_VALIDATE_EMAIL)) { $errors[] = 'Please enter a valid email.'; }
  if ($msg === '') { $errors[] = 'Please write a short message.'; }

  if (!$errors) {
    $subject = "New website inquiry — $brand_name";
    $body = "Name: $name\nEmail: $email\nIP: ".safe_ip()."\n\nMessage:\n$msg\n\n— Sent from nyxionlabs.com";
    $headers = array(
      'From' => $contact_from,
      'Reply-To' => $email,
      'MIME-Version' => '1.0',
      'Content-Type' => 'text/plain; charset=UTF-8'
    );
    $header_str = '';
    foreach ($headers as $k=>$v) { $header_str .= "$k: $v\r\n"; }

    // Many shared hosts reject the 5th param or -f; send without extras
    $sent = @mail($contact_to, $subject, $body, $header_str);

    if (!$sent) {
      // Fallback: log to file so the inquiry is not lost
      $log = __DIR__ . '/inquiries.log';
      $line = "==== ".date('c')." ====\n$subject\n$body\n\n";
      @file_put_contents($log, $line, FILE_APPEND | LOCK_EX);
      $sent = true; // treat as success for UX; you’ll still get it in the log
    }

    if ($sent) {
      // Post/Redirect/Get with thank-you flag
      $base = strtok($_SERVER['REQUEST_URI'], '?');
      @header("Location: {$base}?thanks=1#contact");
      exit;
    } else {
      $errors[] = 'We could not send your message right now. Please email us directly.';
    }
  }
}

$show_thanks = isset($_GET['thanks']);
?>
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nyxion Labs — Applied AI for Ambitious Teams</title>
  <meta name="description" content="Nyxion Labs helps companies design, build, and operate reliable AI systems—automation, assistants, analytics, integrations, and Azure ecosystems—delivered with strong security and governance." />
  <meta name="theme-color" content="#0b1220" />

  <!-- Favicon & social (inline so it always shows) -->
  <link rel="icon" href="<?=$logo_src?>" sizes="48x48" />
  <link rel="apple-touch-icon" href="<?=$logo_src?>" />
  <meta property="og:title" content="Nyxion Labs" />
  <meta property="og:description" content="Applied AI for ambitious teams." />
  <meta property="og:image" content="<?=$logo_src?>" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">

  

<link rel="stylesheet" href="styles.css" />
</head>
<body>
  <a class="skip" href="#main">Skip to content</a>

  <header class="nav" role="banner">
    <div class="container nav-inner">
      <a href="#top" class="brand" aria-label="<?=$brand_name?> home">
        <img src="<?=$logo_src?>" alt="<?=$brand_name?> logo" class="logo-img" />
        <span><?=$brand_name?></span>
      </a>

      <button class="menu-toggle" id="menu-toggle" aria-label="Toggle navigation" aria-controls="primary-nav" aria-expanded="false">
        Menu
      </button>

      <nav aria-label="Primary" id="primary-nav">
        <a href="#solutions">Solutions</a>
        <a href="#capabilities">Capabilities</a>
        <a href="#cases">Case Studies</a>
        <a href="#standards">Standards</a>
        <a href="#contact" class="btn ghost">Contact</a>
      </nav>
    </div>
  </header>

  <main id="main" class="hero" tabindex="-1">
    <div class="container grid">
      <div>
        <span class="eyebrow">Secure • Reliable • Deployable</span>
        <h1>Applied AI for ambitious teams</h1>
        <p class="lead">
          We help organizations design, build, and operate AI systems that actually ship—assistants, automation,
          analytics, computer vision, and cloud ecosystems—delivered with strong security and governance.
        </p>
        <div class="hero-cta">
          <a class="btn" href="#contact">Book a consultation</a>
          <a class="btn ghost" href="#solutions">Explore solutions</a>
        </div>
        <div class="badge-row" aria-label="Highlights">
          <span class="badge">◆ On-prem &amp; cloud</span>
          <span class="badge">◆ Measurement &amp; evals</span>
          <span class="badge">◆ Compliance-friendly workflows</span>
        </div>
      </div>
      <!-- No decorative box -->
      <div aria-hidden="true" class="desk"></div>
    </div>
  </main>

  <section id="solutions" class="section" aria-labelledby="solutions-title">
    <div class="container">
      <h2 id="solutions-title">Solutions</h2>
      <p class="muted">Modular offerings that meet you where you are—each delivered with security, observability, and governance.</p>

      <div class="grid-3" style="margin-top:16px">
        <article class="card" tabindex="0">
          <div class="pill">Automation</div>
          <h3>Process &amp; workflow automation</h3>
          <p class="muted">Automate repetitive tasks across tools with human-in-the-loop guardrails and traceability.</p>
        </article>

        <article class="card" tabindex="0">
          <div class="pill">Assistants</div>
          <h3>Knowledge assistants &amp; agents</h3>
          <p class="muted">RAG-backed assistants that answer with citations from your docs, tickets, and data sources.</p>
        </article>

        <article class="card" tabindex="0">
          <div class="pill">Vision &amp; Docs</div>
          <h3>Document &amp; image understanding</h3>
          <p class="muted">Ingest, classify, and extract structured data from PDFs, forms, images, and video.</p>
        </article>

        <article class="card" tabindex="0">
          <div class="pill">Analytics</div>
          <h3>Predictive &amp; decision support</h3>
          <p class="muted">Forecasting and risk models with dashboards, alerts, and explainability baked in.</p>
        </article>

        <article class="card" tabindex="0">
          <div class="pill">Integrations</div>
          <h3>Platform &amp; data integration</h3>
          <p class="muted">APIs, connectors, and event buses to tie your stack together without vendor lock-in.</p>
        </article>

        <article class="card" tabindex="0">
          <div class="pill">Enablement</div>
          <h3>Training &amp; change management</h3>
          <p class="muted">Playbooks, SOPs, and targeted upskilling so teams adopt AI confidently and safely.</p>
        </article>

        <article class="card" tabindex="0">
          <div class="pill">Azure</div>
          <h3>Azure ecosystem setup</h3>
          <p class="muted">Azure OpenAI, AKS, AAD, Key Vault, Private Link, Monitor, Policies, and Landing Zone—secure by default, production-ready.</p>
        </article>
      </div>

      <div class="kpis" role="list">
        <div class="kpi" role="listitem"><div class="mono" style="font-size:28px">10x</div><div class="muted">Ops throughput</div></div>
        <div class="kpi" role="listitem"><div class="mono" style="font-size:28px">&lt; 80ms</div><div class="muted">Edge latency</div></div>
        <div class="kpi" role="listitem"><div class="mono" style="font-size:28px">99.95%</div><div class="muted">Uptime SLO</div></div>
        <div class="kpi" role="listitem"><div class="mono" style="font-size:28px">Zero</div><div class="muted">Data exfiltration</div></div>
      </div>
    </div>
  </section>

  <section id="capabilities" class="section" aria-labelledby="capabilities-title">
    <div class="container">
      <h2 id="capabilities-title">Core capabilities</h2>
      <div class="grid-2" style="margin-top:12px">
        <article class="card" tabindex="0">
          <h3>Data &amp; platforms</h3>
          <ul class="muted">
            <li>Streaming pipelines • Kafka/NATS</li>
            <li>Vector stores • PgVector/FAISS</li>
            <li>Feature stores • Feast</li>
            <li>Observability • OpenTelemetry</li>
          </ul>
        </article>

        <article class="card" tabindex="0">
          <h3>Model engineering</h3>
          <ul class="muted">
            <li>RAG &amp; tool-use agents</li>
            <li>Fine-tuning &amp; distillation</li>
            <li>Edge/Jetson acceleration</li>
            <li>Evaluation &amp; alignment</li>
          </ul>
        </article>

        <article class="card" tabindex="0">
          <h3>Security &amp; reliability</h3>
          <ul class="muted">
            <li>SBOMs • SLSA • Sigstore</li>
            <li>Policy as code • OPA/Conftest</li>
            <li>Access segregation • ABAC/RBAC</li>
            <li>Air-gap &amp; zero-trust ops</li>
          </ul>
        </article>

        <article class="card" tabindex="0">
          <h3>Azure ecosystem</h3>
          <ul class="muted">
            <li>Azure OpenAI &amp; content filters</li>
            <li>AKS, Functions, APIM, Event Grid</li>
            <li>Key Vault, Private Link, Defender</li>
            <li>Landing Zone, Bicep/Terraform, Policy</li>
          </ul>
        </article>
      </div>
    </div>
  </section>

  <section id="cases" class="section" aria-labelledby="cases-title">
    <div class="container">
      <h2 id="cases-title">Selected case studies</h2>
      <div class="grid-3" style="margin-top:12px">
        <article class="card" tabindex="0">
          <h3>Customer support assistant</h3>
          <p class="muted">Deflected 42% of tickets with a knowledge-grounded assistant integrated with CRM and internal docs.</p>
        </article>
        <article class="card" tabindex="0">
          <h3>Invoice &amp; forms extraction</h3>
          <p class="muted">Automated intake of multi-layout PDFs with human review queues and end-to-end observability.</p>
        </article>
        <article class="card" tabindex="0">
          <h3>Predictive supply planning</h3>
          <p class="muted">Time-series forecasting improved inventory turns by 18% with clear explanations for operators.</p>
        </article>
      </div>
    </div>
  </section>

  <section id="standards" class="section" aria-labelledby="standards-title">
    <div class="container">
      <h2 id="standards-title">Standards &amp; assurances</h2>
    <div class="grid-3" style="margin-top:12px">
        <article class="card" tabindex="0"><h3>Security</h3><p class="muted">Zero-trust defaults, signed artifacts, key management, and privacy-first data design.</p></article>
        <article class="card" tabindex="0"><h3>Reliability</h3><p class="muted">SLOs, incident response, blue/green deploys, and graceful degradation by design.</p></article>
        <article class="card" tabindex="0"><h3>Compliance</h3><p class="muted">ISO 27001 practices, SOC2-friendly controls, and data residency options.</p></article>
      </div>

      <div class="cta" style="margin-top:22px">
        <div>
          <h3 style="margin:6px 0">Ready to ship trustworthy AI?</h3>
          <p class="muted">We’ll assess, prototype, and deploy on premises or in your cloud—safely and fast.</p>
        </div>
        <a class="btn" href="#contact">Start your project</a>
      </div>
    </div>
  </section>

  <section id="contact" class="section" aria-labelledby="contact-title">
    <div class="container">
      <h2 id="contact-title">Contact</h2>
      <p class="muted">Tell us about your use case. We’ll reply within one business day.</p>

      
        <div class="alert ok" role="status">Thank you — your message has been received. We’ll be in touch shortly.</div>
      
        <div class="alert err" role="alert"><?=h(implode(' ', $errors))?></div>
      

      <form method="post" style="margin-top:12px" novalidate>
        <input type="hidden" name="formid" value="contact" />
        <input type="hidden" name="csrf" value="<?=h($_SESSION['csrf'])?>" />
        <input type="text" name="hp" value="" class="skip" tabindex="-1" autocomplete="off" aria-hidden="true" />

        <div class="form-row">
          <div>
            <label for="name">Your name</label>
            <input class="input" id="name" type="text" name="name" value="<?=h($name)?>" placeholder="Jane Doe" required  />
          </div>
          <div>
            <label for="email">Email</label>
            <input class="input" id="email" type="email" name="email" value="<?=h($email)?>" placeholder="jane@company.com" required  />
          </div>
        </div>

        <div style="margin-top:12px">
          <label for="message">How can we help?</label>
          <textarea class="input" id="message" name="message" rows="6" placeholder="Briefly describe your problem space, environment (on-prem or cloud), and timeline."><?=h($msg)?></textarea>
        </div>

        <div style="margin-top:14px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
          <button class="btn" type="submit">Send message</button>
          <span class="muted">or email <span class="mono"><?=h($contact_to)?></span></span>
        </div>
      </form>
    </div>
  </section>

  <footer role="contentinfo">
    <div class="container footer-grid">
      <div>
        <div class="brand" style="margin-bottom:10px">
          <img src="<?=$logo_src?>" alt="<?=$brand_name?> logo" class="logo-img" />
          <span><?=$brand_name?></span>
        </div>
        <p class="muted">Applied AI for automation, assistants, analytics, integrations, and Azure ecosystems. Built with security and operators in mind.</p>
      </div>
      <div>
        <h4>Company</h4>
        <ul class="muted" style="list-style:none;padding:0;margin:6px 0 0 0">
          <li><a href="#solutions">Solutions</a></li>
          <li><a href="#capabilities">Capabilities</a></li>
          <li><a href="#cases">Case Studies</a></li>
          <li><a href="#standards">Standards</a></li>
        </ul>
      </div>
      <div>
        <h4>Contact</h4>
        <ul class="muted" style="list-style:none;padding:0;margin:6px 0 0 0">
          <li><a href="#contact">Work with us</a></li>
          <li><a href="mailto:<?=h($contact_to)?>"><?=h($contact_to)?></a></li>
        </ul>
      </div>
    </div>
    <div class="container" style="margin-top:16px;color:#6d7fb1;font-size:12px">
      © <?= date('Y') ?> <?=h($brand_name)?>. All rights reserved.
    </div>
  </footer>

  <script>
    // Smooth scroll for anchors
    document.querySelectorAll('a[href^="#"]').forEach(function(a){
      a.addEventListener('click', function(e){
        var id = a.getAttribute('href').slice(1);
        var el = document.getElementById(id);
        if (el) { e.preventDefault(); el.scrollIntoView({behavior:'smooth'}); }
      });
    });

    // Mobile menu toggle (accessible)
    var toggle = document.getElementById('menu-toggle');
    var nav = document.getElementById('primary-nav');
    if (toggle && nav) {
      var openMenu = function(){ nav.classList.add('open'); toggle.setAttribute('aria-expanded','true'); };
      var closeMenu = function(){ nav.classList.remove('open'); toggle.setAttribute('aria-expanded','false'); };
      toggle.addEventListener('click', function(){
        if (nav.classList.contains('open')) closeMenu(); else openMenu();
      });
      window.addEventListener('keydown', function(e){ if(e.key==='Escape') closeMenu(); });
      Array.prototype.forEach.call(nav.querySelectorAll('a'), function(link){
        link.addEventListener('click', closeMenu);
      });
    }
  </script>
</body>
</html>